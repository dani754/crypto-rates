(this["webpackJsonpcrypto-rates"]=this["webpackJsonpcrypto-rates"]||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){},19:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),s=n(9),c=n.n(s),i=n(11),o=(n(16),n(2)),u=n(3),h=n(5),l=n(4),d=(n(7),n(0));var j=function(t){return Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:Object(d.jsx)("button",{children:"BTC"})}),Object(d.jsx)("th",{children:Object(d.jsx)("button",{children:"ETH"})}),Object(d.jsx)("th",{children:Object(d.jsx)("button",{children:"LTC"})})]})}),Object(d.jsx)("tbody",{children:Object(d.jsx)("tr",{children:t.rates.map((function(t,e){return Object(d.jsx)("td",{children:t},e)}))})})]})},b="https://crypto-rates-server.herokuapp.com/";function O(t){return new Date(t).toLocaleTimeString("en",{timeStyle:"short",hour12:!1,timeZone:"Asia/Jerusalem"})}function p(t){var e=String(t),n=e.indexOf(".");if(-1===n&&e.length>3){var r=e.substring(e.length-3);e=e.replace(r,","+r)}else if(n>0&&e.substring(0,n).length>3){var a=e.substring(n-3);e=e.replace(a,","+a)}return e}function f(t){return String(t.getDate()).padStart(2,"0")+String(t.getMonth()+1).padStart(2,"0")+String(t.getFullYear()).substring(2)}function x(t){console.log("ddmmyy",t);var e="20"+String(t.substring(4))+"-"+t.substring(2,4)+"-"+t.substring(0,2);return console.log("date to input",e),e}n(8);var m=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).getCurrentRates=function(){fetch(b,{method:"get",dataType:"json",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){console.log("data",t);var e=O(t.date),n=[t.BTC,t.ETH,t.LTC].map((function(t){return p(t)}));r.setState({rates:n,time:e})})).catch((function(t){return console.log(t)}))},r.state={rates:[],time:""},r}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return Array.isArray(this.state.rates)&&0===this.state.rates.length&&this.getCurrentRates(),Object(d.jsxs)("div",{className:"Body",children:[Object(d.jsxs)("h2",{children:["Last Update on ",this.state.time]}),Object(d.jsx)(j,{rates:this.state.rates,onClick:function(e){return t.props.switch(e)}}),Object(d.jsx)("button",{className:"BigButton",onClick:function(){return t.props.switch("BTC")},children:"Get Rates History"})]})}}]),n}(a.a.Component);function g(t,e){return t.map((function(t){var n=t.date.substring(0,10),r=O(t.date),a="";switch(e){case"ETH":a=p(t.ETH);break;case"LTC":a=p(t.LTC);break;default:a=p(t.BTC)}return{date:n,time:r,price:a}}))}function v(t,e){var n=g(t,e);return n.sort((function(t,e){return e.date.localeCompare(t.date)||e.time.localeCompare(t.time)})),n}var C=function(t){var e=v(t.data,t.coin);return Object(d.jsxs)("table",{className:"longTable",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:Object(d.jsx)("button",{onClick:function(){e=v(t.data,t.coin)},children:"Date"})}),Object(d.jsx)("th",{children:Object(d.jsx)("button",{onClick:function(){e=function(t,e){var n=g(t,e);return n.sort((function(t,e){return t.date.localeCompare(e.date)||t.time.localeCompare(e.time)})),n}(t.data,t.coin)},children:"Time"})}),Object(d.jsx)("th",{children:Object(d.jsx)("button",{onClick:function(){e=function(t,e){var n=g(t,e);return n.sort((function(t,e){return t.price-e.price})),n}(t.data,t.coin)},children:"Price"})})]})}),Object(d.jsx)("tbody",{children:e.map((function(t,e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:t.date},t.date+e),Object(d.jsx)("td",{children:t.time},t.time+e),Object(d.jsx)("td",{children:t.price},t.price+e)]},e)}))})]})},T=n(10),y=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).handleDateToParent=function(t){return f(new Date(t))},r.handleChange=function(t){var e=t.target,n=e.value,a=e.name;r.setState(Object(T.a)({},a,n))},r.handleSubmit=function(t){var e=r.handleDateToParent(r.state.start),n=r.handleDateToParent(r.state.end);r.props.onUpdate(r.state.coin,e,n),t.preventDefault()},r.state={coin:"BTC",start:"",end:"",dates:[],times:[],prices:[]},r}return Object(u.a)(n,[{key:"render",value:function(){if(""===this.state.start){var t=x(this.props.start),e=x(this.props.end);this.setState({start:t,end:e})}return Object(d.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(d.jsx)("label",{for:"coin",children:"Coin:"}),Object(d.jsxs)("select",{name:"coin",value:this.state.coin,onChange:this.handleChange,children:[Object(d.jsx)("option",{value:"BTC",children:"Bitcoin"}),Object(d.jsx)("option",{value:"ETH",children:"Ethereum"}),Object(d.jsx)("option",{value:"LTC",children:"Litecoin"})]}),Object(d.jsx)("label",{for:"start",children:"From:"}),Object(d.jsx)("input",{name:"start",type:"date",value:this.state.start,onChange:this.handleChange}),Object(d.jsx)("label",{for:"end",children:"Until:"}),Object(d.jsx)("input",{name:"end",type:"date",value:this.state.end,onChange:this.handleChange}),Object(d.jsx)("button",{children:"OK"})]})}}]),n}(a.a.Component),S=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).getHistoricRates=function(){var t=b+r.state.coin+"/"+r.state.start+"/"+r.state.end;fetch(t,{method:"get",dataType:"json",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){console.log("data",t),r.setState({rates:t})})).catch((function(t){return console.log(t)}))},r.handleChange=function(t,e,n){r.setState({coin:t,start:e,end:n,rates:[]})},r.state={coin:"BTC",start:"",end:"",rates:[]},r}return Object(u.a)(n,[{key:"render",value:function(){var t=this;if(Array.isArray(this.state.rates)&&0===this.state.rates.length&&this.state.start<=f(new Date)&&this.getHistoricRates(),""===this.state.start){var e=f(new Date);this.setState({start:e,end:e})}return Object(d.jsxs)("div",{className:"Body",children:[Object(d.jsx)("button",{className:"BigButton",onClick:function(){return t.props.switch("current")},children:"Back To Live Rates"}),Object(d.jsx)(y,{coin:this.state.coin,start:this.state.start,end:this.state.end,onUpdate:function(e,n,r){return t.handleChange(e,n,r)}}),Object(d.jsx)(C,{data:this.state.rates,coin:this.state.coin})]})}}]),n}(a.a.Component);var B=function(){var t=Object(r.useState)("current"),e=Object(i.a)(t,2),n=e[0],a=e[1],s=Object(d.jsx)(m,{switch:function(t){return a(t)}});return"current"!==n&&(s=Object(d.jsx)(S,{switch:function(t){a(t)},coin:n})),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("h1",{children:"Crypto Rates in USD $"}),s]})};n(18);c.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root"))},7:function(t,e,n){},8:function(t,e,n){}},[[19,1,2]]]);
//# sourceMappingURL=main.370d9423.chunk.js.map